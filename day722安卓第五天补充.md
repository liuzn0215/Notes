## 1.手机号码归属地查询 ##

代码：
	

package com.itheima.phonenumberquery;

import java.io.InputStream;
import java.net.HttpURLConnection;
import java.net.URL;

import org.json.JSONObject;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.View;
import android.widget.EditText;
import android.widget.Toast;

public class MainActivity extends Activity {

	
	private EditText et_number;

	@Override
	protected void onCreate(Bundle savedInstanceState) {
		super.onCreate(savedInstanceState);
		
		setContentView(R.layout.activity_main);
		//用户输入的手机号码 
		et_number = (EditText) findViewById(R.id.et_number);
		
//		findViewById()
	}

	//点击按钮
	public void click(View v) {
		//(1)拿到用户输入的手机号码  
		String number = et_number.getText().toString().trim();
		//(2) 把用户输入的手机号传给 淘宝开源这个服务器  http://tcc.taobao.com/cc/json/mobile_tel_segment.htm?tel=15850781443
		final String path = "http://tcc.taobao.com/cc/json/mobile_tel_segment.htm?tel="+number;
		
		//(3)连接服务器 
		new Thread() {
			public void run() {
				try {
					//(1) 创建一个url对象 参数就是网址 
					URL url = new URL(path);
					//(2)获取HttpURLConnection 链接对象
					HttpURLConnection conn = (HttpURLConnection) url
							.openConnection();
					//(3)设置参数  发送get请求
					conn.setRequestMethod("GET"); //默认请求 就是get  要大写
					//(4)设置链接网络的超时时间 
					conn.setConnectTimeout(5000);
					//(5)获取服务器返回的状态码 
					int code = conn.getResponseCode(); //200  代表获取服务器资源全部成功  206请求部分资源    
					
					if (code == 200) {
						//(6)去服务器取数据  
						InputStream in = conn.getInputStream();
						//(7)把in转换成String 
						String content = StreamTools.readStream(in);
						
						
						//(8)由于淘宝返回的这个不是标准json 需要我们自己手动去截取串
						String newContent = content.replace("__GetZoneResult_ = ", "");
						
						System.out.println("-----"+newContent);
						
						JSONObject object = new JSONObject(newContent);
						String province = (String) object.get("province");
						String catName = (String) object.get("catName");
						
						//(9)弹一个土司 给用户一个友好提示 
						showToast("这个哥们的手机号是:"+province+"--"+catName);
						
						
					}else{
						showToast("这个手机号是不存在");
						
					}
						
						

				} catch (Exception e) {
					e.printStackTrace();
					showToast("手机已经欠费,请充值!!");
				}

			};
		}.start();
		
		

	}
	
	
	//显示一个土司的方法
			public void showToast(final String content){
				runOnUiThread(new Runnable() {
					
					@Override
					public void run() {
					
						//这个土司一定在ui线程执行
						Toast.makeText(getApplicationContext(), content, 1).show();
					}
				});
				
			}

	}




package com.itheima.phonenumberquery;

import java.io.ByteArrayOutputStream;
import java.io.InputStream;

public class StreamTools {

	
	public static String readStream(InputStream in) throws Exception{
		//内存输出流 
		ByteArrayOutputStream baos = new ByteArrayOutputStream();
		int len = -1;
		byte buffer[] =new byte[1024]; //1kb
		while((len=in.read(buffer))!=-1){
			baos.write(buffer, 0, len);
			
		}
		
		String content = new String(baos.toByteArray(),"gbk");
		in.close();//关闭流  
		
		return content;
		
	}
	
}




2.jsonarray解析


代码：

	package com.itheima.jsonarray;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;

public class MainActivity extends Activity {

	
	String json = "[{name:'战三',phone:'110'},{name:'李四',phone:'119'},{name:'王五',phone:'120'}]";
	@Override
	protected void onCreate(Bundle savedInstanceState) {
		super.onCreate(savedInstanceState);
		setContentView(R.layout.activity_main);
		
		//需求 把王五 和 120 给我取出来 
		try {
			JSONArray arr = new JSONArray(json);
			JSONObject object = (JSONObject) arr.get(2);
			String name = (String) object.get("name");
			String phone = (String) object.get("phone");
			
			System.out.println("name:"+name+"---"+phone);
			
		} catch (JSONException e) {
			e.printStackTrace();
		}
		
		
	}

	

}

	